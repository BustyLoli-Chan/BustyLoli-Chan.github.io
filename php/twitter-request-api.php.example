<?php

require_once('TwitterAPIExchange.php
include("XML/Serializer.php");

/** Set access tokens here - see: https://dev.twitter.com/apps/ **/
$settings = array(
    'oauth_access_token' => "OAUTH ACCESS TOKEN",
    'oauth_access_token_secret' => "OAUTH ACCESS TOKEN SECRET",
    'consumer_key' => "CONSUMER KEY",
    'consumer_secret' => "CONSUMER SECRET"
);

/** URL for REST request, see: https://dev.twitter.com/docs/api/1.1/ **/
$url = 'https://api.twitter.com/1.1/search/tweets.json';
$getfield = '?q=%23WMTUrequest&result_type=recent&count=3';
$requestMethod = 'GET';
$twitter = new TwitterAPIExchange($settings);

$json = $twitter->setGetfield($getfield)
                ->buildOauth($url, $requestMethod)
                ->performRequest();
$obj = json_decode($json);

// An array of serializer options
$serializerOptions = array (
  'addDecl' => TRUE,
  'encoding' => 'ISO-8859-1',
  'indent' => "    ",
  'linebreak' => "\n",
  'rootName' => 'json',
  'mode' => 'simplexml'
);
$serializer = new XML_Serializer($serializerOptions);
$status = $serializer->serialize($obj);

if (PEAR::isError($status)) die($status->getMessage());

echo htmlspecialchars($serializer->getSerializedData());

?>
